"use strict";(self.webpackJsonp=self.webpackJsonp||[]).push([[913],{"7477":function(e,s,t){t.d(s,{"Z":function(){return c}});t(7294);var n=t(2432),a=t(3499),l=t(5893),c=function PlanetView(e){var s=e.progress,t=e.size,c=void 0===t?"medium":t,i=e.showLabel,o=void 0===i||i,r=e.animated,d=void 0===r||r,u=e.onClick,h=(0,a.NU)(s),m="planet--".concat(c),x="planet--".concat(h),p=d?"planet--animated":"";return(0,l.jsxs)(n.G7,{"className":"planet-container ".concat(m),"onClick":u,"style":{"cursor":u?"pointer":"default"},"children":[(0,l.jsxs)(n.G7,{"className":"planet ".concat(x," ").concat(p),"children":[(0,l.jsxs)(n.G7,{"className":"planet__surface","children":["desolate"===h&&(0,l.jsx)(n.G7,{"className":"planet__cracks"}),("sprout"===h||"construction"===h)&&(0,l.jsx)(n.G7,{"className":"planet__vegetation"}),("prosperity"===h||"launch"===h||"landing"===h)&&(0,l.jsx)(n.G7,{"className":"planet__cities"}),("launch"===h||"landing"===h)&&(0,l.jsx)(n.G7,{"className":"planet__ring"})]}),(0,l.jsx)(n.G7,{"className":"planet__glow"}),d&&(0,l.jsxs)(l.Fragment,{"children":[(0,l.jsx)(n.G7,{"className":"planet__pulse"}),(0,l.jsxs)(n.G7,{"className":"planet__ai-bots","children":[(0,l.jsx)(n.G7,{"className":"ai-bot ai-bot--1"}),(0,l.jsx)(n.G7,{"className":"ai-bot ai-bot--2"}),(0,l.jsx)(n.G7,{"className":"ai-bot ai-bot--3"})]})]})]}),o&&(0,l.jsxs)(n.G7,{"className":"planet-label","children":[(0,l.jsx)(n.xv,{"className":"planet-label__name","children":"é²¨ä¹‹æ˜Ÿ"}),(0,l.jsxs)(n.xv,{"className":"planet-label__stage","children":["Â· å·²è‹é†’ ",s.toFixed(1),"%"]})]})]})}},"7913":function(e,s,t){t.r(s);var n=t(1413),a=t(885),l=t(7294),c=t(2432),i=t(4536),o=t(7853),r=t(7477),d=t(5589),u=t(6891),h=t(3499),m=t(5893);s.default=function Starlight(){var e=(0,l.useState)(null),s=(0,a.Z)(e,2),t=s[0],x=s[1],p=(0,l.useState)(67.3),v=(0,a.Z)(p,2),j=v[0],N=v[1],g=(0,l.useState)((0,d.zo)()),f=(0,a.Z)(g,2),C=f[0],G=f[1],D=(0,l.useState)(""),y=(0,a.Z)(D,2),_=y[0],b=y[1],w=(0,l.useState)(null),k=(0,a.Z)(w,2),S=k[0],q=k[1],I=function refreshProgress(){var e=(0,d.yu)();x(e),G((0,d.zo)()),(0,h.cL)().then(function(e){N(e.progress)})};(0,l.useEffect)(function(){I()},[]),i.ZP.useDidShow(function(){I()}),(0,l.useEffect)(function(){var e=function updateCountdown(){var e=(0,d.zo)();G(e),e.remainingTime>0&&b((0,d.dH)(e.remainingTime))};e();var s=setInterval(e,1e3);return function(){return clearInterval(s)}},[]);var O=(null==t?void 0:t.todayCompleted)&&(null==t?void 0:t.heroCompleted),L=function handleChestClick(){if(null!=t&&t.pendingChest){var e=(0,d.zo)();if("locked"!==e.status){if("expired"===e.status){alert("å®ç®±å·²è¿‡æœŸï¼Œæ˜å¤©ç»§ç»­åŠªåŠ›å§ï¼");var s=(0,n.Z)((0,n.Z)({},t),{},{"pendingChest":null});return(0,d.Uv)(s),void I()}if("unlocked"===e.status){var a=(0,d.lj)();if(a){var l=a.levels.map(function(e){return(0,u.PR)(e)}),c=a.levels.length>1?"è·å¾— ".concat(l.map(function(e){return e.emoji}).join(" + ")):"è·å¾— ".concat(l[0].emoji," ").concat(l[0].name);alert("".concat(c," å®ç®±ï¼\nèƒ½é‡å·²æ³¨å…¥æ˜Ÿçƒ~")),I()}}}else alert("å®ç®±è¿˜åœ¨è§£é”ä¸­...\nå‰©ä½™æ—¶é—´: ".concat(_))}},R=function handleChestTooltip(e,s){s.stopPropagation(),q(S===e?null:e)},Z=function renderTooltip(e,s){var t=(0,u.Ge)(e)[0],n=(0,u.PR)(e);return(0,m.jsxs)(c.G7,{"className":"chest-tooltip","onClick":function onClick(e){return e.stopPropagation()},"children":[(0,m.jsxs)(c.xv,{"className":"tooltip-title","children":[n.emoji," ",n.name,"å¯èƒ½åŒ…å«ï¼š"]}),(0,m.jsxs)(c.G7,{"className":"tooltip-rewards","children":[(0,m.jsxs)(c.xv,{"className":"tooltip-item","children":["ğŸ’° ",t.coins]}),(0,m.jsxs)(c.xv,{"className":"tooltip-item","children":["ğŸ§° ",t.props]}),t.lottery&&(0,m.jsxs)(c.xv,{"className":"tooltip-item","children":["ğŸ« ",t.lottery]}),t.physical&&(0,m.jsxs)(c.xv,{"className":"tooltip-item","children":["ğŸ ",t.physical]})]})]})},P=function renderHoverTooltip(e){var s=(0,u.Ge)(e)[0],t=(0,u.PR)(e);return(0,m.jsxs)(c.G7,{"className":"chest-tooltip-hover","children":[(0,m.jsxs)(c.xv,{"className":"tooltip-title","children":[t.emoji," ",t.name,"å¯èƒ½åŒ…å«ï¼š"]}),(0,m.jsxs)(c.G7,{"className":"tooltip-rewards","children":[(0,m.jsxs)(c.xv,{"className":"tooltip-item","children":["ğŸ’° ",s.coins]}),(0,m.jsxs)(c.xv,{"className":"tooltip-item","children":["ğŸ§° ",s.props]}),s.lottery&&(0,m.jsxs)(c.xv,{"className":"tooltip-item","children":["ğŸ« ",s.lottery]}),s.physical&&(0,m.jsxs)(c.xv,{"className":"tooltip-item","children":["ğŸ ",s.physical]})]})]})};if(!t)return null;var T=C.chest?C.chest.levels.map(function(e){return(0,u.PR)(e)}):null,E=C.chest?C.chest.levels:[],A=(0,d.Sh)(t.consecutiveDays);return(0,m.jsxs)(c.G7,{"className":"starlight","children":[(0,m.jsxs)(c.G7,{"className":"starlight__header","children":[(0,m.jsxs)(c.G7,{"className":"streak-badge","children":[(0,m.jsx)(c.xv,{"className":"streak-badge__icon","children":"ğŸ”¥"}),(0,m.jsx)(c.xv,{"className":"streak-badge__count","children":t.consecutiveDays})]}),(0,m.jsxs)(c.G7,{"className":"debug-buttons","children":[(0,m.jsx)(c.xv,{"className":"debug-btn","onClick":function handleReset(){confirm("ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰æ•°æ®å—ï¼Ÿ")&&((0,o.wk)(),I(),alert("æ•°æ®å·²é‡ç½®"))},"children":"ğŸ”„"}),(0,m.jsx)(c.xv,{"className":"debug-btn","onClick":function handleTestWin(){i.ZP.navigateTo({"url":"/pages/game/index?mode=normal&autowin=true"})},"children":"ğŸ¯"}),(0,m.jsx)(c.xv,{"className":"debug-btn","onClick":function handleSkipCountdown(){if(t)if(t.pendingChest){var e=new Date;t.pendingChest.unlockAt=new Date(e.getTime()-1e3).toISOString(),t.pendingChest.expiresAt=new Date(e.getTime()+864e5).toISOString(),(0,d.Uv)(t),I(),alert("å€’è®¡æ—¶å·²è·³è¿‡ï¼Œå®ç®±å·²è§£é”ï¼")}else alert("æ²¡æœ‰å¾…å¼€å¯å®ç®±")},"children":"â­ï¸"}),(0,m.jsx)(c.xv,{"className":"debug-btn","onClick":function handleNextDay(){var e,s,a;if(t&&confirm("ç¡®å®šè¦è¿›å…¥ç¬¬äºŒå¤©å—ï¼Ÿè¿™å°†æ¨¡æ‹Ÿå®ç®±å·²è§£é”çŠ¶æ€ã€‚")){var l=new Date,c=new Date(l.getTime()-864e5),i="".concat(c.getFullYear(),"-").concat(String(c.getMonth()+1).padStart(2,"0"),"-").concat(String(c.getDate()).padStart(2,"0")),o=(null===(e=t.pendingChest)||void 0===e||null===(e=e.levels)||void 0===e?void 0:e[0])||"GOLD",r=(null===(s=t.pendingChest)||void 0===s?void 0:s.levels)||[o],u=(null===(a=t.pendingChest)||void 0===a?void 0:a.isHeroBonus)||!1,h=new Date(c.getTime()),m=new Date(l.getTime()+864e5),x=(0,n.Z)((0,n.Z)({},t),{},{"todayDate":i,"todayCompleted":!0,"todayChestLevel":o,"heroCompleted":!0,"consecutiveDays":t.consecutiveDays+1,"lastCompletionDate":i,"pendingChest":{"levels":r,"earnedAt":c.toISOString(),"unlockAt":h.toISOString(),"expiresAt":m.toISOString(),"isHeroBonus":u}});(0,d.Uv)(x),I(),alert("å·²è¿›å…¥ç¬¬äºŒå¤©çŠ¶æ€ï¼Œå®ç®±å·²è§£é”ï¼Œå¯ä»¥é¢†å–ï¼")}},"children":"ğŸ“…"}),(0,m.jsx)(c.xv,{"className":"debug-btn","onClick":function handleShowStatus(){console.log("Current Progress:",t),alert("ä»Šæ—¥å®Œæˆ: ".concat(null!=t&&t.todayCompleted?"æ˜¯":"å¦","\nHeroå®Œæˆ: ").concat(null!=t&&t.heroCompleted?"æ˜¯":"å¦","\nè¿ç»­å¤©æ•°: ").concat(null==t?void 0:t.consecutiveDays,"\nå¾…é¢†å–å®ç®±: ").concat(null!=t&&t.pendingChest?t.pendingChest.levels[0]:"æ— "))},"children":"ğŸ“Š"})]})]}),(0,m.jsx)(c.G7,{"className":"starlight__intro","children":(0,m.jsx)(c.xv,{"className":"intro-text","children":"å®Œæˆæ¯æ—¥æŒ‘æˆ˜ï¼Œç‚¹äº®ä¸€æŸå…‰ï¼Œä¸ºé²¨ä¹‹æ˜Ÿæ³¨å…¥èƒ½é‡"})}),(0,m.jsxs)(c.G7,{"className":"starlight__planet","children":[(0,m.jsx)(r.Z,{"progress":j,"size":"large","onClick":function handlePlanetClick(){i.ZP.navigateTo({"url":"/pages/world/index"})}}),(0,m.jsx)(c.xv,{"className":"explore-hint","children":"ç‚¹å‡»æ¢ç´¢æ˜Ÿçƒ"})]}),(0,m.jsxs)(c.G7,{"className":"starlight__chest","children":["none"===C.status&&(0,m.jsxs)(c.G7,{"className":"chest-empty","children":[(0,m.jsx)(c.xv,{"className":"empty-text","children":"ä»Šæ—¥è¿˜æ²¡æœ‰å®ç®±"}),(0,m.jsx)(c.xv,{"className":"empty-hint","children":"å®Œæˆä»Šæ—¥æŒ‘æˆ˜è·å¾—å®ç®±"})]}),"locked"===C.status&&T&&(0,m.jsxs)(c.G7,{"className":"chest-card chest-locked","onClick":L,"children":[(0,m.jsx)(c.xv,{"className":"chest-card__label","children":"âœ¨ æ¥è‡ªæ˜Ÿçƒçš„å›é¦ˆ"}),(0,m.jsx)(c.G7,{"className":"chest-card__icons","children":T.map(function(e,s){return(0,m.jsxs)(c.G7,{"className":"chest-icon-wrapper","onClick":function onClick(e){return R(s,e)},"children":[(0,m.jsx)(c.xv,{"className":"chest-icon","children":e.emoji}),P(E[s]),S===s&&Z(E[s])]},s)})}),(0,m.jsx)(c.xv,{"className":"chest-name","children":T.length>1?T.map(function(e){return e.name}).join(" + "):T[0].name}),(0,m.jsxs)(c.G7,{"className":"countdown-box","children":[(0,m.jsx)(c.xv,{"className":"countdown-label","children":"ğŸ”’ è§£é”å€’è®¡æ—¶"}),(0,m.jsx)(c.xv,{"className":"countdown-time","children":_})]})]}),"unlocked"===C.status&&T&&(0,m.jsxs)(c.G7,{"className":"chest-card chest-unlocked","onClick":L,"children":[(0,m.jsx)(c.xv,{"className":"chest-card__label","children":"âœ¨ æ¥è‡ªæ˜Ÿçƒçš„å›é¦ˆ"}),(0,m.jsx)(c.G7,{"className":"chest-card__icons","children":T.map(function(e,s){return(0,m.jsxs)(c.G7,{"className":"chest-icon-wrapper","onClick":function onClick(e){return R(s+100,e)},"children":[(0,m.jsx)(c.xv,{"className":"chest-icon glowing","children":e.emoji}),P(E[s]),S===s+100&&Z(E[s])]},s)})}),(0,m.jsx)(c.xv,{"className":"chest-name","children":T.length>1?T.map(function(e){return e.name}).join(" + "):T[0].name}),(0,m.jsx)(c.zx,{"className":"claim-btn","onClick":L,"children":"å¼€å¯å®ç®±"}),(0,m.jsxs)(c.xv,{"className":"expire-hint","children":["â° ",_," åè¿‡æœŸ"]})]}),"expired"===C.status&&(0,m.jsxs)(c.G7,{"className":"chest-card chest-expired","children":[(0,m.jsx)(c.xv,{"className":"expired-text","children":"ğŸ˜¢ å®ç®±å·²è¿‡æœŸ"}),(0,m.jsx)(c.xv,{"className":"expired-hint","children":"æ˜å¤©ç»§ç»­åŠ æ²¹å§"})]})]}),(0,m.jsxs)(c.G7,{"className":"starlight__milestones","children":[(0,m.jsxs)(c.G7,{"className":"milestones-header","children":[(0,m.jsxs)(c.xv,{"className":"milestones-title","children":["ğŸ”¥ è¿ç»­ç‚¹äº® ",t.consecutiveDays," å¤©"]}),A.nextReward>0&&(0,m.jsxs)(c.xv,{"className":"milestones-subtitle","children":["å†åšæŒ ",A.nextReward-t.consecutiveDays," å¤©è·å¾—å¥–åŠ±"]})]}),(0,m.jsx)(c.G7,{"className":"milestones-list","children":[{"days":7,"reward":"å®ä½“å‘¨è¾¹å¥–åŠ±"},{"days":14,"reward":"å®ä½“è´´çº¸åŒ…"},{"days":30,"reward":"å®ä½“æ‰‹é“¾/æŒ‚ä»¶"},{"days":60,"reward":"é™å®šç¤¼ç›’"}].map(function(e){return(0,m.jsxs)(c.G7,{"className":"milestone-item ".concat(t.consecutiveDays>=e.days?"completed":""),"children":[(0,m.jsx)(c.xv,{"className":"milestone-check","children":t.consecutiveDays>=e.days?"âœ…":"â¬œ"}),(0,m.jsxs)(c.xv,{"className":"milestone-text","children":["è¿ç»­é€šå…³",e.days,"å¤©ï¼Œå³å¯è·å¾—",e.reward,"ï¼"]})]},e.days)})})]}),(0,m.jsxs)(c.G7,{"className":"starlight__action","children":[(0,m.jsxs)(c.G7,{"className":"light-button ".concat(O?"light-button--disabled":""),"onClick":O?void 0:function handleLightUp(){null!=t&&t.todayCompleted?i.ZP.navigateTo({"url":"/pages/game/index?mode=hero"}):i.ZP.navigateTo({"url":"/pages/game/index?mode=normal"})},"children":[(0,m.jsx)(c.xv,{"className":"light-button__text","children":function getButtonText(){return t?t.todayCompleted&&t.heroCompleted?"æ˜æ—¥å†æ¥ç‚¹äº®":t.todayCompleted?"æŒ‘æˆ˜ Hero":"ç‚¹äº®":"ç‚¹äº®"}()}),(0,m.jsx)(c.G7,{"className":"light-button__glow"})]}),(0,m.jsx)(c.xv,{"className":"today-theme","children":"ä»Šæ—¥ä¸»é¢˜ï¼šé‚£ä¸ªå››å—é’±çš„çƒæ‹ ğŸ“"})]})]})}},"6891":function(e,s,t){t.d(s,{"Ge":function(){return getChestRewardDetails},"HS":function(){return calculateChestLevel},"PR":function(){return getChestLevelInfo},"bV":function(){return upgradeChestForHero},"ns":function(){return createInitialStats}});var n=t(5961);function calculateChestLevel(e){var s=e.attempts,t=e.toolsUsed;return 1===s?0===t?n.q2.DIAMOND:1===t?n.q2.GOLD:n.q2.SILVER:2===s?t<=1?n.q2.GOLD:n.q2.SILVER:3===s?t<=2?n.q2.SILVER:n.q2.BRONZE:s>=4&&s<=5&&t<=1?n.q2.SILVER:n.q2.BRONZE}function getChestLevelInfo(e){switch(e){case n.q2.DIAMOND:return{"emoji":"ğŸ’","name":"é’»çŸ³å®ç®±","color":"#00D4FF"};case n.q2.GOLD:return{"emoji":"ğŸ¥‡","name":"é»„é‡‘å®ç®±","color":"#FFD700"};case n.q2.SILVER:return{"emoji":"ğŸ¥ˆ","name":"ç™½é“¶å®ç®±","color":"#C0C0C0"};case n.q2.BRONZE:return{"emoji":"ğŸ¥‰","name":"é’é“œå®ç®±","color":"#CD7F32"}}}function getChestRewardDetails(e){switch(e){case n.q2.DIAMOND:return[{"coins":"é‡‘å¸Ã—500","props":"é“å…·Ã—3","lottery":"æŠ½å¥–åˆ¸Ã—2","physical":"10%å®ä½“å‘¨è¾¹"}];case n.q2.GOLD:return[{"coins":"é‡‘å¸Ã—300","props":"é“å…·Ã—2","lottery":"æŠ½å¥–åˆ¸Ã—1","physical":"3%å®ä½“å‘¨è¾¹"}];case n.q2.SILVER:return[{"coins":"é‡‘å¸Ã—150","props":"é“å…·Ã—1","lottery":"5%æŠ½å¥–åˆ¸","physical":""}];case n.q2.BRONZE:return[{"coins":"é‡‘å¸Ã—50","props":"é“å…·ç¢ç‰‡","lottery":"","physical":""}]}}function upgradeChestForHero(e){switch(e){case n.q2.BRONZE:return[n.q2.GOLD];case n.q2.SILVER:return[n.q2.DIAMOND];case n.q2.GOLD:return[n.q2.DIAMOND,n.q2.GOLD];case n.q2.DIAMOND:return[n.q2.DIAMOND,n.q2.DIAMOND]}}function createInitialStats(){return{"attempts":1,"toolsUsed":0,"undoUsed":!1,"shuffleUsed":!1,"popUsed":!1}}}}]);