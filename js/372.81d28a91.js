"use strict";(self.webpackJsonp=self.webpackJsonp||[]).push([[372],{"3372":function(t,e,a){a.r(e),a.d(e,{"_TGATextureLoader":function(){return _TGATextureLoader}});var r=a(9023);function GetTGAHeader(t){let e=0;return{"id_length":t[e++],"colormap_type":t[e++],"image_type":t[e++],"colormap_index":t[e++]|t[e++]<<8,"colormap_length":t[e++]|t[e++]<<8,"colormap_size":t[e++],"origin":[t[e++]|t[e++]<<8,t[e++]|t[e++]<<8],"width":t[e++]|t[e++]<<8,"height":t[e++]|t[e++]<<8,"pixel_size":t[e++],"flags":t[e++]}}function UploadContent(t,e){if(e.length<19)return void r.Y.Error("Unable to load TGA file - Not enough data to contain header");let a=18;const o=GetTGAHeader(e);if(o.id_length+a>e.length)return void r.Y.Error("Unable to load TGA file - Not enough data");a+=o.id_length;let i,s=!1,g=!1,h=!1;switch(o.image_type){case 9:s=!0;case 1:g=!0;break;case 10:s=!0;case 2:break;case 11:s=!0;case 3:h=!0}const c=o.pixel_size>>3,l=o.width*o.height*c;let d,f,u,_,b,p,w;if(g&&(d=e.subarray(a,a+=o.colormap_length*(o.colormap_size>>3))),s){let t,r,n;i=new Uint8Array(l);let o=0;const s=new Uint8Array(c);for(;a<l&&o<l;)if(t=e[a++],r=1+(127&t),128&t){for(n=0;n<c;++n)s[n]=e[a++];for(n=0;n<r;++n)i.set(s,o+n*c);o+=c*r}else{for(r*=c,n=0;n<r;++n)i[o+n]=e[a++];o+=r}}else i=e.subarray(a,a+=g?o.width*o.height:l);switch((48&o.flags)>>4){default:case 2:f=0,_=1,w=o.width,u=0,b=1,p=o.height;break;case 0:f=0,_=1,w=o.width,u=o.height-1,b=-1,p=-1;break;case 3:f=o.width-1,_=-1,w=-1,u=0,b=1,p=o.height;break;case 1:f=o.width-1,_=-1,w=-1,u=o.height-1,b=-1,p=-1}const y="_getImageData"+(h?"Grey":"")+o.pixel_size+"bits",m=n[y](o,d,i,u,b,p,f,_,w);t.getEngine()._uploadDataToTextureDirectly(t,m)}const n={"GetTGAHeader":GetTGAHeader,"UploadContent":UploadContent,"_getImageData8bits":function _getImageData8bits(t,e,a,r,n,o,i,s,g){const h=a,c=e,l=t.width,d=t.height;let f,u,_,b=0;const p=new Uint8Array(l*d*4);for(_=r;_!==o;_+=n)for(u=i;u!==g;u+=s,b++)f=h[b],p[4*(u+l*_)+3]=255,p[4*(u+l*_)+2]=c[3*f+0],p[4*(u+l*_)+1]=c[3*f+1],p[4*(u+l*_)+0]=c[3*f+2];return p},"_getImageData16bits":function _getImageData16bits(t,e,a,r,n,o,i,s,g){const h=a,c=t.width,l=t.height;let d,f,u,_=0;const b=new Uint8Array(c*l*4);for(u=r;u!==o;u+=n)for(f=i;f!==g;f+=s,_+=2){d=h[_+0]+(h[_+1]<<8);const t=255*((31744&d)>>10)/31|0,e=255*((992&d)>>5)/31|0,a=255*(31&d)/31|0;b[4*(f+c*u)+0]=t,b[4*(f+c*u)+1]=e,b[4*(f+c*u)+2]=a,b[4*(f+c*u)+3]=32768&d?0:255}return b},"_getImageData24bits":function _getImageData24bits(t,e,a,r,n,o,i,s,g){const h=a,c=t.width,l=t.height;let d,f,u=0;const _=new Uint8Array(c*l*4);for(f=r;f!==o;f+=n)for(d=i;d!==g;d+=s,u+=3)_[4*(d+c*f)+3]=255,_[4*(d+c*f)+2]=h[u+0],_[4*(d+c*f)+1]=h[u+1],_[4*(d+c*f)+0]=h[u+2];return _},"_getImageData32bits":function _getImageData32bits(t,e,a,r,n,o,i,s,g){const h=a,c=t.width,l=t.height;let d,f,u=0;const _=new Uint8Array(c*l*4);for(f=r;f!==o;f+=n)for(d=i;d!==g;d+=s,u+=4)_[4*(d+c*f)+2]=h[u+0],_[4*(d+c*f)+1]=h[u+1],_[4*(d+c*f)+0]=h[u+2],_[4*(d+c*f)+3]=h[u+3];return _},"_getImageDataGrey8bits":function _getImageDataGrey8bits(t,e,a,r,n,o,i,s,g){const h=a,c=t.width,l=t.height;let d,f,u,_=0;const b=new Uint8Array(c*l*4);for(u=r;u!==o;u+=n)for(f=i;f!==g;f+=s,_++)d=h[_],b[4*(f+c*u)+0]=d,b[4*(f+c*u)+1]=d,b[4*(f+c*u)+2]=d,b[4*(f+c*u)+3]=255;return b},"_getImageDataGrey16bits":function _getImageDataGrey16bits(t,e,a,r,n,o,i,s,g){const h=a,c=t.width,l=t.height;let d,f,u=0;const _=new Uint8Array(c*l*4);for(f=r;f!==o;f+=n)for(d=i;d!==g;d+=s,u+=2)_[4*(d+c*f)+0]=h[u+0],_[4*(d+c*f)+1]=h[u+0],_[4*(d+c*f)+2]=h[u+0],_[4*(d+c*f)+3]=h[u+1];return _}};class _TGATextureLoader{"constructor"(){this.supportCascades=!1}"loadCubeData"(){throw".env not supported in Cube."}"loadData"(t,e,a){const r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=GetTGAHeader(r);a(n.width,n.height,e.generateMipMaps,!1,()=>{UploadContent(e,r)})}}}}]);