name = "amio-world-api"
main = "src/index.ts"
compatibility_date = "2024-12-01"
compatibility_flags = ["nodejs_compat"]

# Custom domain: api.amio.love (requires amio.love to be on Cloudflare)
# After deploying, add a DNS record in Cloudflare: CNAME api -> amio-world-api.workers.dev
routes = [
  { pattern = "api.amio.love", custom_domain = true }
]

[vars]
# Non-secret config. Secrets (OPENROUTER_API_KEY) are set via:
#   wrangler secret put OPENROUTER_API_KEY
# or via GitHub Actions secret OPENROUTER_API_KEY
OPENROUTER_MODEL = "deepseek/deepseek-v3.2"

# KV namespace for world state persistence.
# After running `wrangler kv namespace create WORLD_KV`, replace the id values below.
[[kv_namespaces]]
binding = "WORLD_KV"
id = "bb33b8f0f5c049398dd5a2727762558b"
preview_id = "d05484d36b88440dbc3f1ee4c4fcc570"
